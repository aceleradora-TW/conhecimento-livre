<!DOCTYPE html>
<html>
<head>
  {{#content}}
  <meta charset="utf-8">
  <title>Conhecimento Livre</title>
  <link rel="stylesheet" href="/css/content.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fjalla+One">
  {{/content}}
</head>
<body>
  <section class="content-section">
    <header class="content-header">
      <div class="logo">
        <h1><a href="/">&#60;/CONHECIMENTO LIVRE&#62;</a></h1>
      </div>
    </header>
    <div class="container">
      <div class="content-container">
        {{#content}}
        <div class="player-container">
          <p class="title">{{title}}</p>
          <iframe class="player-size" src="https://www.youtube.com/embed/{{url}}" frameborder="0" allowfullscreen></iframe>
          <p class="views">Views: {{ views }}</p>
        </div>
        {{/content}}
      </div>
      <div class="playlist-container">
        <div>
          <ul>
            {{#allContents}}
            <li>
              <input id="content-id" type="hidden" value="{{ id }}"/>
              <a class='thumbnail' href="/content/{{ id }}">
                <img src="http://i1.ytimg.com/vi/{{ url }}/mqdefault.jpg" alt="">
                <div class="title-video">{{ title }}</div>
                <p class="preview"> {{ preview }}</p>
              </a>
            </li>
            {{/allContents}}
          </ul>
        </div>
      </div>
    </div>
  </section>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.17.0/axios.js" charset="utf-8"></script>
  <script>
    const contentId = document.querySelector('#content-id').value
    axios
      .post('/content/view/increment', {id: contentId})
      .then(() => console.log('View count atualizado'))
      .catch(error => console.log('Erro ao atualizar view count', error.message))
  </script>
</body>
</html>
